<! DOCTYPE html>
<head>
  <title>Calculateur de temps de livraison</title>
</head>
<body>
  <table id="tableau"></table>
  <script>
    let dataC = [];
    let dataP = [];
    async function getDatasC() {
      console.log("Fetching Google API");
    const response = await fetch ("https://sheets.googleapis.com/v4/spreadsheets/1clXfkqBSq5w9wYUW7ztSeLYMCjh9mZQGdXhMOs9wzB4/values/Chaufferies!A:C?key=AIzaSyCZ_z9l9uecGSrVRdOD3ISnkte4zeoNPqA");
    const result = await response.json();
      console.log(result.values);
      dataC = result.values;
    }
    getDatasC();
     async function getDatasP() {
      console.log("Fetching Google API");
    const response = await fetch ("https://sheets.googleapis.com/v4/spreadsheets/1clXfkqBSq5w9wYUW7ztSeLYMCjh9mZQGdXhMOs9wzB4/values/Plateformes!A:C?key=AIzaSyCZ_z9l9uecGSrVRdOD3ISnkte4zeoNPqA");
    const result = await response.json();
      console.log(result.values);
      dataC = result.values;
    }
    getDatasP();
async function getDistance(ax, ay, bx, by) {
  let checkpoint = ax + "," + ay + ";" + bx + "," + by + ";";
  console.log(checkpoint);
  const response = await fetch(`https://router.project-osrm.org/route/v1/driving/${checkpoint}?overview=full&geometries=geojson`);
  const result = await response.json();
  console.log(result);
  return [result.time, result.distance];
}

    for (const chauf of dataC) {
      // Pour chaque chaudi√®re
      for (const plat of dataP) {
        console.log(getDistance(chauf.lat, chauf.long, plat.lat, plat.long));
      }
    }
  </script>
</body>
</html>
